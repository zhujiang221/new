<template>
  <div class="user-home">
    <!-- æ¬¢è¿åŒºåŸŸ -->
    <div class="welcome-section">
      <h1 class="welcome-title">ä½ å¥½ï¼Œ{{ userInfo.name || 'ç”¨æˆ·' }}ï¼</h1>
      <p class="welcome-subtitle">æ¬¢è¿ä½¿ç”¨å® ç‰©åŒ»é™¢ç®¡ç†ç³»ç»Ÿ</p>
    </div>

    <!-- åŠŸèƒ½å¡ç‰‡ç½‘æ ¼ -->
    <div class="function-grid">
      <!-- å® ç‰©ç®¡ç† -->
      <div class="function-card" @click="navigate('/user/pets')">
        <div class="card-icon">ğŸ¾</div>
        <div class="card-title">å® ç‰©ç®¡ç†</div>
        <div class="card-desc">ç®¡ç†æ‚¨çš„å® ç‰©ä¿¡æ¯</div>
      </div>

      <!-- é¢„çº¦ç®¡ç† -->
      <div class="function-card" @click="navigate('/user/apply')">
        <div class="card-icon">ğŸ“…</div>
        <div class="card-title">é¢„çº¦ç®¡ç†</div>
        <div class="card-desc">æŸ¥çœ‹å’Œç®¡ç†é¢„çº¦</div>
      </div>

      <!-- å¥åº·ç›‘æµ‹ -->
      <div class="function-card" @click="navigate('/user/assess')">
        <div class="card-icon">â¤ï¸</div>
        <div class="card-title">å¥åº·ç›‘æµ‹</div>
        <div class="card-desc">è¯„ä¼°å® ç‰©å¥åº·çŠ¶å†µ</div>
      </div>

      <!-- å¥åº·æŒ‡å— -->
      <div class="function-card" @click="navigate('/user/notices')">
        <div class="card-icon">ğŸ“–</div>
        <div class="card-title">å¥åº·æŒ‡å—</div>
        <div class="card-desc">æŸ¥çœ‹å¥åº·çŸ¥è¯†</div>
      </div>

      <!-- å® ç‰©æ—¥å¿— -->
      <div class="function-card" @click="navigate('/user/pet-daily')">
        <div class="card-icon">ğŸ“</div>
        <div class="card-title">å® ç‰©æ—¥å¿—</div>
        <div class="card-desc">è®°å½•æ—¥å¸¸å¥åº·æ•°æ®</div>
      </div>

      <!-- è¯Šæ–­è®°å½• -->
      <div class="function-card" @click="navigate('/user/diagnosis')">
        <div class="card-icon">ğŸ¥</div>
        <div class="card-title">è¯Šæ–­è®°å½•</div>
        <div class="card-desc">æŸ¥çœ‹å†å²è¯Šæ–­</div>
      </div>

      <!-- å¥åº·æ ‡å‡† -->
      <div class="function-card" @click="navigate('/user/standards')">
        <div class="card-icon">ğŸ“Š</div>
        <div class="card-title">å¥åº·æ ‡å‡†</div>
        <div class="card-desc">äº†è§£å¥åº·æ ‡å‡†</div>
      </div>

      <!-- åŒ»ç”Ÿæ—¶é—´ -->
      <div class="function-card" @click="navigate('/user/free-time')">
        <div class="card-icon">â°</div>
        <div class="card-title">åŒ»ç”Ÿæ—¶é—´</div>
        <div class="card-desc">æŸ¥çœ‹åŒ»ç”Ÿå¯é¢„çº¦æ—¶é—´</div>
      </div>

      <!-- æ›´å¤šåŠŸèƒ½ -->
      <div class="function-card" @click="navigate('/user/more')">
        <div class="card-icon">â‹¯</div>
        <div class="card-title">æ›´å¤š</div>
        <div class="card-desc">æŸ¥çœ‹æ›´å¤šåŠŸèƒ½</div>
      </div>
    </div>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats-section">
      <div class="stats-card" @click="navigate('/user/tj-apply')">
        <div class="stats-icon">ğŸ“ˆ</div>
        <div class="stats-content">
          <div class="stats-title">é¢„çº¦ç»Ÿè®¡</div>
          <div class="stats-desc">æŸ¥çœ‹é¢„çº¦æ•°æ®åˆ†æ</div>
        </div>
        <div class="stats-arrow">â†’</div>
      </div>
      <div class="stats-card" @click="navigate('/user/tj-daily')">
        <div class="stats-icon">ğŸ“‰</div>
        <div class="stats-content">
          <div class="stats-title">æ—¥å¿—ç»Ÿè®¡</div>
          <div class="stats-desc">æŸ¥çœ‹å¥åº·æ•°æ®å›¾è¡¨</div>
        </div>
        <div class="stats-arrow">â†’</div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { reactive } from 'vue';
import { useRouter } from 'vue-router';
import { getUserInfo } from '../../utils/user';

const router = useRouter();
const userInfo = reactive(getUserInfo() || { name: 'ç”¨æˆ·' });

// å®šä¹‰ emit
const emit = defineEmits<{
  navigate: [path: string];
}>();

function navigate(path: string) {
  // å…ˆè§¦å‘äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶
  emit('navigate', path);
  // ç„¶åè¿›è¡Œè·¯ç”±è·³è½¬
  router.push(path);
}
</script>

<style scoped>
.user-home {
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.welcome-section {
  margin-bottom: 30px;
  padding: 20px;
  background: linear-gradient(135deg, #72C1BB 0%, #5aa9a3 100%);
  border-radius: 12px;
  color: white;
}

.welcome-title {
  font-size: 28px;
  font-weight: bold;
  margin: 0 0 8px 0;
}

.welcome-subtitle {
  font-size: 16px;
  margin: 0;
  opacity: 0.9;
}

.function-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.function-card {
  background: white;
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border: 1px solid #f0f0f0;
}

.function-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 16px rgba(114, 193, 187, 0.3);
  border-color: #72C1BB;
}

.card-icon {
  font-size: 48px;
  margin-bottom: 12px;
}

.card-title {
  font-size: 18px;
  font-weight: bold;
  color: #333;
  margin-bottom: 8px;
}

.card-desc {
  font-size: 14px;
  color: #666;
}

.stats-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.stats-card {
  background: white;
  border-radius: 12px;
  padding: 20px;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border: 1px solid #f0f0f0;
}

.stats-card:hover {
  transform: translateX(4px);
  box-shadow: 0 4px 16px rgba(114, 193, 187, 0.3);
  border-color: #72C1BB;
}

.stats-icon {
  font-size: 40px;
  margin-right: 16px;
}

.stats-content {
  flex: 1;
}

.stats-title {
  font-size: 18px;
  font-weight: bold;
  color: #333;
  margin-bottom: 4px;
}

.stats-desc {
  font-size: 14px;
  color: #666;
}

.stats-arrow {
  font-size: 24px;
  color: #72C1BB;
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 767px) {
  .user-home {
    padding: 15px;
  }

  .welcome-section {
    padding: 16px;
  }

  .welcome-title {
    font-size: 24px;
  }

  .function-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  .function-card {
    padding: 16px;
  }

  .card-icon {
    font-size: 36px;
    margin-bottom: 8px;
  }

  .card-title {
    font-size: 16px;
  }

  .card-desc {
    font-size: 12px;
  }

  .stats-section {
    grid-template-columns: 1fr;
  }
}
</style>
